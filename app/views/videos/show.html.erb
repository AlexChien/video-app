<!-- 展示页面 视频详细信息显示 开始 -->
<%= javascript_include_tag 'flowplayer' %>

<div class="span-4"><h2>播放视频</h2></div>
<% if current_user && current_user.has_role?('admin') %>
<div class="button">
  <%= link_to "管理该视频", edit_admin_video_path(@video) %>
</div>	  
<% end %>
<hr />

<h3 class="alt"><%= @video.title %></h3>
<hr class="space" />

<div class = "span-19 author">
  <%= link_to @video.user.login, @video.user %> 上传于 <%= @video.created_at.to_s(:db) %>
</div>
<hr class="space" />

<% if false %>
<span class = "tags">Tagged with: <span><%= @video.tag_list %></span></span>
<% end %>

<div class="prepend-1">
<% 
  case @video.state
  when "converted" || "no_encoding"
  url = @video.state == "converted" ? @video.asset.url(:transcoded) : @video.asset.url 
%>
<p id="video">
  <a  
  href="<%= url %>"  
  style="display:block;width:500px;height:375px" 
  id="player"> </a>
  <!-- this will install flowplayer inside previous A- tag. -->
  <script>
  flowplayer("player", "/flowplayer/flowplayer-3.0.3.swf",{clip:{autoPlay: false, autoBuffering: false}});
  </script>
</p>  
<% when "error" %>
<div class="error">视频编码错误，请联系管理员</div>	
<% when "pending" %>
<div class="notice">视频尚未审核通过</div>	
<% else %>
<div class="notice">视频正在处理中，稍后再试</div>
<% end %>
</div>

<hr class="space" />

<div class="span-1">描述</div>
<div class="span-17"><%= @video.description %></div>

<%#= image_tag @video.asset.url %>
<%#= image_tag @video.asset.url(:large) %>

<% if false %>
<div id = "video_replies">
  <%= render :partial => 'reply' %>

  <% for reply in @video.replies do %>
  <div class = "reply">
    <p class = "author">Posted By: <%= link_to reply.user.login, reply.user %> on <%= reply.created_at %></p>
    <%= reply.body %>
  </div>
  <% end %>
</div>
<% end %>	
<!-- 展示页面 视频详细信息显示 结束 -->	